(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function d(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(e){if(e.ep)return;e.ep=!0;const r=d(e);fetch(e.href,r)}})();const c=document.getElementById("scrapeBtn"),i=document.getElementById("downloadAllBtn"),l=document.getElementById("downloadProfileBtn"),u=document.getElementById("downloadExamBtn"),m=document.getElementById("downloadCurriculumBtn"),g=document.getElementById("scrapeWeeklyScheduleBtn"),p=document.getElementById("scrapeExamScheduleBtn"),f=document.getElementById("scrapeGradesBtn"),h=document.getElementById("scrapeAttendanceBtn"),B=document.getElementById("scrapeCurrentPageBtn"),n=document.getElementById("status");c.addEventListener("click",()=>{c.disabled=!0,n.textContent="Đang bắt đầu...",chrome.runtime.sendMessage({action:"startScraping"},t=>{chrome.runtime.lastError?(n.textContent=`Lỗi: ${chrome.runtime.lastError.message}`,c.disabled=!1):t&&t.status&&(n.textContent=t.status)})});i.addEventListener("click",()=>{chrome.runtime.sendMessage({action:"downloadAll"})});l.addEventListener("click",()=>{chrome.runtime.sendMessage({action:"downloadProfile"})});u.addEventListener("click",()=>{chrome.runtime.sendMessage({action:"downloadExam"})});m.addEventListener("click",()=>{chrome.runtime.sendMessage({action:"downloadCurriculum"})});g.addEventListener("click",()=>{n.textContent="Đang mở trang lịch tuần...",chrome.runtime.sendMessage({action:"scrapeHTMLPage",pageType:"weekly-schedule"})});p.addEventListener("click",()=>{n.textContent="Đang mở trang lịch thi...",chrome.runtime.sendMessage({action:"scrapeHTMLPage",pageType:"exam-schedule"})});f.addEventListener("click",()=>{n.textContent="Đang mở trang điểm...",chrome.runtime.sendMessage({action:"scrapeHTMLPage",pageType:"student-grades"})});h.addEventListener("click",()=>{n.textContent="Đang mở trang điểm danh...",chrome.runtime.sendMessage({action:"scrapeHTMLPage",pageType:"attendance-report"})});B.addEventListener("click",()=>{n.textContent="Đang cào trang hiện tại...",chrome.runtime.sendMessage({action:"scrapeCurrentPage"})});chrome.runtime.onMessage.addListener((t,o,d)=>{t.action==="updateStatus"?n.textContent=t.data:t.action==="scrapingComplete"?(n.textContent="Đã cào dữ liệu thành công!",i.disabled=!1,l.disabled=!1,u.disabled=!1,m.disabled=!1,c.disabled=!1):t.action==="htmlScrapingComplete"?n.textContent=`Đã cào HTML thành công! File: ${t.fileName}`:t.action==="htmlScrapingError"&&(n.textContent=`Lỗi cào HTML: ${t.error}`)});
